{"ast":null,"code":"import React from'react';import axios from'axios';import User from'../components/user';import Header from'../components/header';import Footer from'../components/footer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PageApp(){const[users,setUsers]=React.useState([]);const[pageLoaded,setLoaded]=React.useState(false);React.useEffect(function(){console.log('effect');async function fetchAllUsers(){try{const appMessage=document.getElementById('app-message');console.log('send request');appMessage.innerHTML=waitElement;const res=await axios.get('https://backend-iss-kin-utilisateurs.onrender.com/users');appMessage.style.display=\"none\";console.log('get response');setUsers(res.data);setLoaded(true);}catch{const appMessage=document.getElementById('app-message');appMessage.innerHTML=requestFalureElement;//document.getElementById(\"container\")\n//.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\n}}fetchAllUsers();},[]);let usersElements=users.map(user=>{return/*#__PURE__*/_jsx(User,{...user},user.userid);});/*function deleteUser(props){\r\n        (async () =>{\r\n            const appMessage = document.getElementById('app-message')\r\n            const appFooter = document.getElementById('footer')\r\n            try{\r\n                appMessage.style.display = \"block\";\r\n                appFooter.style.display=\"none\"\r\n                await axios.delete('https://backend-iss-kin-utilisateurs.onrender.com/user/' + props.userid);\r\n                appMessage.style.display = \"none\";\r\n                appFooter.style.display=\"flex\"\r\n            }catch{\r\n                console.log(\"Erreur lors de la connection au server\")\r\n            }    \r\n        })();\r\n    }*/const waitElement=\"<img\\n                            src=\\\"icons/wait.gif\\\"\\n                            style=\\\"width:100%;\\\"\\n                          />\";const requestFalureElement=\"<p \\n                                    style=\\\"font-weight:bolder;\\n                                    font-size:1rem;\\n                                     margin:20px;\\n                                     text-align:center;\\n                                      color: orange\\\">\\n                                    Erreur au niveau du serveur\\n                                    </p>\\n                                    <small style=\\\"font-weight:small;font-size:small; margin:20px; text-align:center\\\">\\n                                        Contactez moi pour resoudre ce probl\\xE8me\\n                                    </small>\";console.log(pageLoaded);console.log('render');return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Header,{}),pageLoaded&&/*#__PURE__*/_jsx(\"div\",{className:\"user-list-container\",children:usersElements}),!pageLoaded&&/*#__PURE__*/_jsx(\"div\",{id:\"app-message\",className:\"app-message\"}),pageLoaded&&/*#__PURE__*/_jsx(Footer,{})]});}export default PageApp;","map":{"version":3,"names":["React","axios","User","Header","Footer","jsx","_jsx","jsxs","_jsxs","PageApp","users","setUsers","useState","pageLoaded","setLoaded","useEffect","console","log","fetchAllUsers","appMessage","document","getElementById","innerHTML","waitElement","res","get","style","display","data","requestFalureElement","usersElements","map","user","userid","className","children","id"],"sources":["D:/MY FILES/PROJECTS/Web/NEW WEB PROJECT/FRONTEND/src/pages/pageApp.js"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport User from '../components/user';\r\nimport Header from '../components/header';\r\nimport Footer from '../components/footer';\r\n\r\nfunction PageApp(){\r\n    const [users, setUsers] = React.useState([]);\r\n    const [pageLoaded, setLoaded] = React.useState(false);\r\n\r\n    React.useEffect(function(){\r\n        console.log('effect')\r\n        async function fetchAllUsers(){\r\n            try{\r\n                const appMessage = document.getElementById('app-message');\r\n                console.log('send request')\r\n                appMessage.innerHTML = waitElement;\r\n                const res = await axios.get('https://backend-iss-kin-utilisateurs.onrender.com/users');\r\n                appMessage.style.display=\"none\";\r\n                console.log('get response')\r\n                setUsers(res.data);\r\n                setLoaded(true);\r\n            }catch{\r\n                const appMessage = document.getElementById('app-message');\r\n                appMessage.innerHTML = requestFalureElement;\r\n                //document.getElementById(\"container\")\r\n                //.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\r\n            }          \r\n        }\r\n        fetchAllUsers();\r\n    },[])\r\n\r\n    let usersElements = users.map(\r\n        user=>{\r\n            return(\r\n              <User\r\n                key = {user.userid}\r\n                {...user}\r\n              />\r\n                )      \r\n        }      \r\n    );\r\n    \r\n    /*function deleteUser(props){\r\n        (async () =>{\r\n            const appMessage = document.getElementById('app-message')\r\n            const appFooter = document.getElementById('footer')\r\n            try{\r\n                appMessage.style.display = \"block\";\r\n                appFooter.style.display=\"none\"\r\n                await axios.delete('https://backend-iss-kin-utilisateurs.onrender.com/user/' + props.userid);\r\n                appMessage.style.display = \"none\";\r\n                appFooter.style.display=\"flex\"\r\n            }catch{\r\n                console.log(\"Erreur lors de la connection au server\")\r\n            }    \r\n        })();\r\n    }*/\r\n\r\n    const waitElement = `<img\r\n                            src=\"icons/wait.gif\"\r\n                            style=\"width:100%;\"\r\n                          />`\r\n    const requestFalureElement = `<p \r\n                                    style=\"font-weight:bolder;\r\n                                    font-size:1rem;\r\n                                     margin:20px;\r\n                                     text-align:center;\r\n                                      color: orange\">\r\n                                    Erreur au niveau du serveur\r\n                                    </p>\r\n                                    <small style=\"font-weight:small;font-size:small; margin:20px; text-align:center\">\r\n                                        Contactez moi pour resoudre ce probl√®me\r\n                                    </small>`\r\n                console.log(pageLoaded)\r\n                console.log('render')\r\n\r\n    return(\r\n       <div className=\"app-container\">\r\n            <Header/>\r\n            {pageLoaded && (\r\n            <div className='user-list-container'>\r\n                {usersElements}\r\n            </div>)}\r\n            {!pageLoaded && <div id = \"app-message\" className=\"app-message\"></div>}\r\n            {pageLoaded && <Footer/>}    \r\n        </div>\r\n    )\r\n}\r\nexport default PageApp;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,QAAS,CAAAC,OAAOA,CAAA,CAAE,CACd,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,KAAK,CAACY,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACC,UAAU,CAAEC,SAAS,CAAC,CAAGd,KAAK,CAACY,QAAQ,CAAC,KAAK,CAAC,CAErDZ,KAAK,CAACe,SAAS,CAAC,UAAU,CACtBC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrB,cAAe,CAAAC,aAAaA,CAAA,CAAE,CAC1B,GAAG,CACC,KAAM,CAAAC,UAAU,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CACzDL,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAC3BE,UAAU,CAACG,SAAS,CAAGC,WAAW,CAClC,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAvB,KAAK,CAACwB,GAAG,CAAC,yDAAyD,CAAC,CACtFN,UAAU,CAACO,KAAK,CAACC,OAAO,CAAC,MAAM,CAC/BX,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAC3BN,QAAQ,CAACa,GAAG,CAACI,IAAI,CAAC,CAClBd,SAAS,CAAC,IAAI,CAAC,CACnB,CAAC,KAAK,CACF,KAAM,CAAAK,UAAU,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CACzDF,UAAU,CAACG,SAAS,CAAGO,oBAAoB,CAC3C;AACA;AACJ,CACJ,CACAX,aAAa,CAAC,CAAC,CACnB,CAAC,CAAC,EAAE,CAAC,CAEL,GAAI,CAAAY,aAAa,CAAGpB,KAAK,CAACqB,GAAG,CACzBC,IAAI,EAAE,CACF,mBACE1B,IAAA,CAACJ,IAAI,KAEC8B,IAAI,EADDA,IAAI,CAACC,MAEb,CAAC,CAER,CACJ,CAAC,CAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAEI,KAAM,CAAAV,WAAW,4IAGQ,CACzB,KAAM,CAAAM,oBAAoB,soBAUe,CAC7Bb,OAAO,CAACC,GAAG,CAACJ,UAAU,CAAC,CACvBG,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CAEjC,mBACGT,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAC,QAAA,eACzB7B,IAAA,CAACH,MAAM,GAAC,CAAC,CACRU,UAAU,eACXP,IAAA,QAAK4B,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAC/BL,aAAa,CACb,CAAE,CACN,CAACjB,UAAU,eAAIP,IAAA,QAAK8B,EAAE,CAAG,aAAa,CAACF,SAAS,CAAC,aAAa,CAAM,CAAC,CACrErB,UAAU,eAAIP,IAAA,CAACF,MAAM,GAAC,CAAC,EACvB,CAAC,CAEd,CACA,cAAe,CAAAK,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}