{"ast":null,"code":"import React from'react';import axios from'axios';import User from'../components/user';import Header from'../components/header';import Footer from'../components/footer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PageApp(){const[users,setUsers]=React.useState([]);React.useEffect(function(){async function fetchAllUsers(){const appMessage=document.getElementById('app-message');const appFooter=document.getElementById('footer');try{appMessage.style.display=\"block\";appFooter.style.display=\"none\";const res=await axios.get('https://backend-iss-kin-utilisateurs.onrender.com/users');appMessage.style.display=\"none\";appFooter.style.display=\"flex\";setUsers(res.data);}catch{console.log(\"Erreur lors de la connection au server\");//document.getElementById(\"container\")\n//.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\n}}fetchAllUsers();},[]);let usersElements=users.map(user=>{return/*#__PURE__*/_jsx(User,{handleClick:deleteUser,...user},user.userid);});function deleteUser(props){(async()=>{const appMessage=document.getElementById('app-message');const appFooter=document.getElementById('footer');try{appMessage.style.display=\"block\";appFooter.style.display=\"none\";await axios.delete('https://backend-iss-kin-utilisateurs.onrender.com/user/'+props.userid);appMessage.style.display=\"none\";appFooter.style.display=\"flex\";}catch{console.log(\"Erreur lors de la connection au server\");}})();}return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",id:\"container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"img\",{id:\"app-message\",className:\"app-message\",src:\"icons/wait.gif\",alt:\"wait\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-list-container\",children:usersElements}),/*#__PURE__*/_jsx(Footer,{})]});}export default PageApp;","map":{"version":3,"names":["React","axios","User","Header","Footer","jsx","_jsx","jsxs","_jsxs","PageApp","users","setUsers","useState","useEffect","fetchAllUsers","appMessage","document","getElementById","appFooter","style","display","res","get","data","console","log","usersElements","map","user","handleClick","deleteUser","userid","props","delete","className","id","children","src","alt"],"sources":["D:/MY FILES/PROJECTS/Web/NEW WEB PROJECT/FRONTEND/src/pages/pageApp.js"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport User from '../components/user';\r\nimport Header from '../components/header';\r\nimport Footer from '../components/footer';\r\n\r\nfunction PageApp(){\r\n    const [users, setUsers] = React.useState([]);\r\n\r\n    React.useEffect(function(){\r\n        async function fetchAllUsers(){\r\n            const appMessage = document.getElementById('app-message')\r\n            const appFooter = document.getElementById('footer')\r\n            try{\r\n                appMessage.style.display = \"block\";\r\n                appFooter.style.display=\"none\"\r\n                const res = await axios.get('https://backend-iss-kin-utilisateurs.onrender.com/users');\r\n                appMessage.style.display = \"none\";\r\n                appFooter.style.display=\"flex\"\r\n                setUsers(res.data);\r\n            }catch{\r\n                console.log(\"Erreur lors de la connection au server\")\r\n                //document.getElementById(\"container\")\r\n                //.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\r\n            }          \r\n        }\r\n        fetchAllUsers();\r\n    },[])\r\n\r\n    let usersElements = users.map(\r\n        user=>{\r\n            return(\r\n              <User\r\n                key = {user.userid}\r\n                handleClick = {deleteUser}\r\n                {...user}\r\n              />\r\n                )      \r\n        }      \r\n    );\r\n    \r\n    function deleteUser(props){\r\n        (async () =>{\r\n            const appMessage = document.getElementById('app-message')\r\n            const appFooter = document.getElementById('footer')\r\n            try{\r\n                appMessage.style.display = \"block\";\r\n                appFooter.style.display=\"none\"\r\n                await axios.delete('https://backend-iss-kin-utilisateurs.onrender.com/user/' + props.userid);\r\n                appMessage.style.display = \"none\";\r\n                appFooter.style.display=\"flex\"\r\n            }catch{\r\n                console.log(\"Erreur lors de la connection au server\")\r\n            }    \r\n        })();\r\n    }\r\n\r\n    return(\r\n       <div className=\"app-container\" id=\"container\">\r\n            <Header/>\r\n            <img id=\"app-message\" className=\"app-message\" src=\"icons/wait.gif\" alt=\"wait\"></img>\r\n            <div className='user-list-container'>\r\n            {usersElements}\r\n            </div>\r\n            <Footer/>     \r\n        </div>\r\n    )\r\n}\r\nexport default PageApp;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,QAAS,CAAAC,OAAOA,CAAA,CAAE,CACd,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,KAAK,CAACY,QAAQ,CAAC,EAAE,CAAC,CAE5CZ,KAAK,CAACa,SAAS,CAAC,UAAU,CACtB,cAAe,CAAAC,aAAaA,CAAA,CAAE,CAC1B,KAAM,CAAAC,UAAU,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CACzD,KAAM,CAAAC,SAAS,CAAGF,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CACnD,GAAG,CACCF,UAAU,CAACI,KAAK,CAACC,OAAO,CAAG,OAAO,CAClCF,SAAS,CAACC,KAAK,CAACC,OAAO,CAAC,MAAM,CAC9B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,yDAAyD,CAAC,CACtFP,UAAU,CAACI,KAAK,CAACC,OAAO,CAAG,MAAM,CACjCF,SAAS,CAACC,KAAK,CAACC,OAAO,CAAC,MAAM,CAC9BT,QAAQ,CAACU,GAAG,CAACE,IAAI,CAAC,CACtB,CAAC,KAAK,CACFC,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CACrD;AACA;AACJ,CACJ,CACAX,aAAa,CAAC,CAAC,CACnB,CAAC,CAAC,EAAE,CAAC,CAEL,GAAI,CAAAY,aAAa,CAAGhB,KAAK,CAACiB,GAAG,CACzBC,IAAI,EAAE,CACF,mBACEtB,IAAA,CAACJ,IAAI,EAEH2B,WAAW,CAAIC,UAAW,IACtBF,IAAI,EAFDA,IAAI,CAACG,MAGb,CAAC,CAER,CACJ,CAAC,CAED,QAAS,CAAAD,UAAUA,CAACE,KAAK,CAAC,CACtB,CAAC,SAAW,CACR,KAAM,CAAAjB,UAAU,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CACzD,KAAM,CAAAC,SAAS,CAAGF,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CACnD,GAAG,CACCF,UAAU,CAACI,KAAK,CAACC,OAAO,CAAG,OAAO,CAClCF,SAAS,CAACC,KAAK,CAACC,OAAO,CAAC,MAAM,CAC9B,KAAM,CAAAnB,KAAK,CAACgC,MAAM,CAAC,yDAAyD,CAAGD,KAAK,CAACD,MAAM,CAAC,CAC5FhB,UAAU,CAACI,KAAK,CAACC,OAAO,CAAG,MAAM,CACjCF,SAAS,CAACC,KAAK,CAACC,OAAO,CAAC,MAAM,CAClC,CAAC,KAAK,CACFI,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CACzD,CACJ,CAAC,EAAE,CAAC,CACR,CAEA,mBACGjB,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAACC,EAAE,CAAC,WAAW,CAAAC,QAAA,eACxC9B,IAAA,CAACH,MAAM,GAAC,CAAC,cACTG,IAAA,QAAK6B,EAAE,CAAC,aAAa,CAACD,SAAS,CAAC,aAAa,CAACG,GAAG,CAAC,gBAAgB,CAACC,GAAG,CAAC,MAAM,CAAM,CAAC,cACpFhC,IAAA,QAAK4B,SAAS,CAAC,qBAAqB,CAAAE,QAAA,CACnCV,aAAa,CACT,CAAC,cACNpB,IAAA,CAACF,MAAM,GAAC,CAAC,EACR,CAAC,CAEd,CACA,cAAe,CAAAK,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}